{% extends "streamData/layout.html" %} {% block title%}
<title>
    Converting Tool
</title>
{% endblock%} {% block body %}
<script>
    function copyToClipboard(element) {
        var $temp = $("<textarea>");
        var brRegex = /<br\s*[\/]?>/gi;
        $("body").append($temp);
        $temp.val($(element).html().replace(brRegex, "\r\n")).select();
        document.execCommand("copy");
        $temp.remove();
    }
</script>
<div class='row'>

    {% if batchFile %}
    <div class='col-12 col-md-6'>
        <h3>Batch Pipeline</h3>
        <pre>{{ batchFile }}</pre>
    </div>
    {% endif %} {% if streamFile%}
    <div class='col-12 col-md-6'>
        <h3> Stream Pipeline</h3>
        <pre id='p1'>{{streamFile}}</pre>
    </div>
    {% endif %}

    <div class='col-12'>


        {% if not batchFile%}
        <div class='row justify-content-around'>
            <div class='col-6'>
                <div class='row'>
                    <div class='col-12'>
                        <h3> Upload a batch processing pipeline</h3>
                    </div>
                </div>

                <div class='row'>
                    <div class='col-6'>
                        <form action="{% url 'streamData:convert' %}" method="POST" enctype="multipart/form-data">
                            <div class="form-group">
                                {% csrf_token %} {{ form }}
                            </div>

                            <button type="submit" ,class="btn btn-primary lg"> Convert </button>





                        </form>
                    </div>
                </div>
                {% else %}
                <div class='row justify-content-end'>
                    <div class='col-6'></div>
                    <div class='col-6'>
                        <div class='row'>
                            <div class='col-12 text-right'>
                                <a role="button" class="btn btn-info lg" href="{% url 'streamData:convert'%}"> Convert a another batch
                         pipline </a>
                            </div>

                        </div>
                        <div class='row'>
                            <div class='col-12 text-right'>
                                <button class='btn btn-secondary lg' , onclick="copyToClipboard(' #p1 ')">Copy File</button>
                            </div>

                        </div>
                    </div>
                </div>
                {% endif %}



            </div>
        </div>
        {% endblock %}
    </div>
</div>